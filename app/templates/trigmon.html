{% extends "base.html" %} {% block head %} {{ super() }}
<link href="{{ url_for('static', filename='inspinia/css/plugins/footable/footable.core.css') }}" rel="stylesheet"> {% endblock %} {% block page_content %}
<div class="wrapper wrapper-content">
    <div classs='row'>
        <div class="col-lg-4">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>TURF Monitor</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                </div>
                <div class="ibox-content">
                    <table data-sort="false" class="footable" data-page-size="20" id='turf' style="width:100%">
                        <tbody>
                            <tr>
                                <td >Index:</td>
                                <td id='index'></td>
                            </tr>
                            <tr>
                                <td >Crc:</td>
                                <td id='crc'></td>
                            </tr>
                            <tr>
                                <td data-hide="xs">nbuf:</td>
                                <td id='nbuf'></td>
                            </tr>
                            <tr>
                                <td>Now:</td>
                                <td id='now'></td>
                            </tr>
                            <tr>
                                <td>Time:</td>
                                <td id='time'></td>
                            </tr>
                            <tr>
                                <td>Deadtime:</td>
                                <td id='deadtime'></td>
                            </tr>
                            <tr>
                                <td>l2TrigMask:</td>
                                <td id='l2trigmask'></td>
                            </tr>
                            <tr>
                                <td>PhiTrigMask:</td>
                                <td id='phitrigmask'></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="ibox-content">
                    <table data-sort="false" class="footable" data-page-size="56" id='lrates' style="width:100%">
                        <h5>Rates (Hz)</h5>
                        <tbody>
                            <tr>
                                <td>L2</td>
                                <td id='l2_0'></td>
                                <td id='l2_1'></td>
                                <td id='l2_2'></td>
                                <td id='l2_3'></td>
                                <td id='l2_4'></td>
                                <td id='l2_5'></td>
                                <td id='l2_6'></td>
                                <td id='l2_7'></td>
                                <td id='l2_8'></td>
                                <td id='l2_9'></td>
                                <td id='l2_10'></td>
                                <td id='l2_11'></td>
                                <td id='l2_12'></td>
                                <td id='l2_13'></td>
                                <td id='l2_14'></td>
                                <td id='l2_15'></td>
                            </tr>
                            <th>
                                <td>&nbsp 1</td>
                                <td>&nbsp 2</td>
                                <td>&nbsp 3</td>
                                <td>&nbsp 4</td>
                                <td>&nbsp 5</td>
                                <td>&nbsp 6</td>
                                <td>&nbsp 7</td>
                                <td>&nbsp 8</td>
                                <td>&nbsp 9</td>
                                <td>10</td>
                                <td>11</td>
                                <td>12</td>
                                <td>13</td>
                                <td>14</td>
                                <td>15</td>
                                <td>16</td>
                            </th>
                           
                            <tr>
                                <td>L3</td>
                                <td id='l3_0'></td>
                                <td id='l3_1'></td>
                                <td id='l3_2'></td>
                                <td id='l3_3'></td>
                                <td id='l3_4'></td>
                                <td id='l3_5'></td>
                                <td id='l3_6'></td>
                                <td id='l3_7'></td>
                                <td id='l3_8'></td>
                                <td id='l3_9'></td>
                                <td id='l3_10'></td>
                                <td id='l3_11'></td>
                                <td id='l3_12'></td>
                                <td id='l3_13'></td>
                                <td id='l3_14'></td>
                                <td id='l3_15'></td>
                            </tr>
                            <th>
                                <td>&nbsp 1</td>
                                <td>&nbsp 2</td>
                                <td>&nbsp 3</td>
                                <td>&nbsp 4</td>
                                <td>&nbsp 5</td>
                                <td>&nbsp 6</td>
                                <td>&nbsp 7</td>
                                <td>&nbsp 8</td>
                                <td>&nbsp 9</td>
                                <td>10</td>
                                <td>11</td>
                                <td>12</td>
                                <td>13</td>
                                <td>14</td>
                                <td>15</td>
                                <td>16</td>
                            </th>
                            <tr>
                                <td>L3Gated</td>
                                <td id='l3gated_0'></td>
                                <td id='l3gated_1'></td>
                                <td id='l3gated_2'></td>
                                <td id='l3gated_3'></td>
                                <td id='l3gated_4'></td>
                                <td id='l3gated_5'></td>
                                <td id='l3gated_6'></td>
                                <td id='l3gated_7'></td>
                                <td id='l3gated_8'></td>
                                <td id='l3gated_9'></td>
                                <td id='l3gated_10'></td>
                                <td id='l3gated_11'></td>
                                <td id='l3gated_12'></td>
                                <td id='l3gated_13'></td>
                                <td id='l3gated_14'></td>
                                <td id='l3gated_15'></td>
                            </tr>
                            <th>
                                <td>&nbsp 1</td>
                                <td>&nbsp 2</td>
                                <td>&nbsp 3</td>
                                <td>&nbsp 4</td>
                                <td>&nbsp 5</td>
                                <td>&nbsp 6</td>
                                <td>&nbsp 7</td>
                                <td>&nbsp 8</td>
                                <td>&nbsp 9</td>
                                <td>10</td>
                                <td>11</td>
                                <td>12</td>
                                <td>13</td>
                                <td>14</td>
                                <td>15</td>
                                <td>16</td>
                            </th>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-lg-8">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>SURF Monitor</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                    </div>
                    <ul class="nav nav-tabs">
                        <li class="active"><a data-toggle="tab" href="#tab-1"> RF Power</a></li>
                        <li class=""><a data-toggle="tab" href="#tab-2">Scalers</a></li>
                        <li class=""><a data-toggle="tab" href="#tab-3">Thresholds</a></li>
                    </ul>
                    <div class="tab-content">
                        <div id="tab-1" class="tab-pane active">
                            <div class="panel-body">
                                <div class="ibox-content">
                                    <table data-sort="false" class="footable" data-page-size="20" id='rfpower' style="width:100%">
                                        <tbody>
                                            <tr>
                                                <td>Index:</td>
                                                <td id='index'></td>
                                                <td>Crc:</td>
                                                <td id='crc'></td>
                                            </tr>
                                            <tr>
                                                <td data-hide="xs">nbuf:</td>
                                                <td id='nbuf'></td>
                                                <td>Now:</td>
                                                <td id='now'></td>
                                            </tr>
                                            <tr>
                                                <td>Time:</td>
                                                <td id='time'></td>
                                                <td>us:</td>
                                                <td id='us'></td>
                                            </tr>
                                            <tr>
                                                <td>Global threshold:</td>
                                                <td id='global'></td>
                                                <td>Error flag:</td>
                                                <td id='error'></td>
                                            </tr>
                                            <tr>
                                                <td>Upper Word 1:</td>
                                                <td id='upper_0'></td>
                                                <td>Upper Word 2:</td>
                                                <td id='upper_1'></td>
                                            </tr>
                                            <tr>
                                                <td>Upper Word 3:</td>
                                                <td id='upper_2'></td>
                                                <td>Upper Word 4:</td>
                                                <td id='upper_3'></td>
                                            </tr>
                                            <tr>
                                                <td>Upper Word 5:</td>
                                                <td id='upper_4'></td>
                                                <td>Upper Word 6:</td>
                                                <td id='upper_5'></td>
                                            </tr>
                                            <tr>
                                                <td>Upper Word 7:</td>
                                                <td id='upper_6'></td>
                                                <td>Upper Word 8:</td>
                                                <td id='upper_7'></td>
                                            </tr>
                                            <tr>
                                                <td>Upper Word 9:</td>
                                                <td id='upper_8'></td>
                                                <td>Upper Word 10:</td>
                                                <td id='upper_9'></td>
                                            </tr>
                                            <tr>
                                                <td>Upper Word 11:</td>
                                                <td id='upper_10'></td>
                                                <td>Upper Word 12:</td>
                                                <td id='upper_11'></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="ibox-content">
                                    <table data-sort="false" class="footable" data-page-size="56" id='rfpow' style="width:100%">
                                        <h5>RF Power Surf 1-12</h5>
                                        <tbody>
                                            <tr>
                                                <td></td>
                                                <td id='rfpow_0_0'></td>
                                                <td id='rfpow_0_1'></td>
                                                <td id='rfpow_0_2'></td>
                                                <td id='rfpow_0_3'></td>
                                                <td id='rfpow_0_4'></td>
                                                <td id='rfpow_0_5'></td>
                                                <td id='rfpow_0_6'></td>
                                                <td id='rfpow_0_7'></td>
                                            </tr>
                                            <th>
                                                <td>10 BV</td>
                                                <td>2 BV</td>
                                                <td>16 BV</td>
                                                <td>8 BV</td>
                                                <td>10 BH</td>
                                                <td>2 BH</td>
                                                <td>16 BH</td>
                                                <td>8 BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='rfpow_1_0'></td>
                                                <td id='rfpow_1_1'></td>
                                                <td id='rfpow_1_2'></td>
                                                <td id='rfpow_1_3'></td>
                                                <td id='rfpow_1_4'></td>
                                                <td id='rfpow_1_5'></td>
                                                <td id='rfpow_1_6'></td>
                                                <td id='rfpow_1_7'></td>
                                            </tr>
                                            <th>
                                                <td>12 BV</td>
                                                <td>4 BV</td>
                                                <td>14 BV</td>
                                                <td>6 BV</td>
                                                <td>12 BH</td>
                                                <td>4 BH</td>
                                                <td>14 BH</td>
                                                <td>6 BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='rfpow_2_0'></td>
                                                <td id='rfpow_2_1'></td>
                                                <td id='rfpow_2_2'></td>
                                                <td id='rfpow_2_3'></td>
                                                <td id='rfpow_2_4'></td>
                                                <td id='rfpow_2_5'></td>
                                                <td id='rfpow_2_6'></td>
                                                <td id='rfpow_2_7'></td>
                                            </tr>
                                            <th>
                                                <td>16 MV</td>
                                                <td>8 MV</td>
                                                <td>12 MV</td>
                                                <td>4 MV</td>
                                                <td>16 MH</td>
                                                <td>8 MH</td>
                                                <td>12 MH</td>
                                                <td>4 MH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='rfpow_3_0'></td>
                                                <td id='rfpow_3_1'></td>
                                                <td id='rfpow_3_2'></td>
                                                <td id='rfpow_3_3'></td>
                                                <td id='rfpow_3_4'></td>
                                                <td id='rfpow_3_5'></td>
                                                <td id='rfpow_3_6'></td>
                                                <td id='rfpow_3_7'></td>
                                            </tr>
                                            <th>
                                                <td>14 MV</td>
                                                <td>6 MV</td>
                                                <td>10 MV</td>
                                                <td>2 MV</td>
                                                <td>14 MH</td>
                                                <td>6 MH</td>
                                                <td>10 MH</td>
                                                <td>2 MH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='rfpow_4_0'></td>
                                                <td id='rfpow_4_1'></td>
                                                <td id='rfpow_4_2'></td>
                                                <td id='rfpow_4_3'></td>
                                                <td id='rfpow_4_4'></td>
                                                <td id='rfpow_4_5'></td>
                                                <td id='rfpow_4_6'></td>
                                                <td id='rfpow_4_7'></td>
                                            </tr>
                                            <th>
                                                <td>12 TV</td>
                                                <td>4 TV</td>
                                                <td>14 TV</td>
                                                <td>6 TV</td>
                                                <td>12 TH</td>
                                                <td>4 TH</td>
                                                <td>14 TH</td>
                                                <td>6 TH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='rfpow_5_0'></td>
                                                <td id='rfpow_5_1'></td>
                                                <td id='rfpow_5_2'></td>
                                                <td id='rfpow_5_3'></td>
                                                <td id='rfpow_5_4'></td>
                                                <td id='rfpow_5_5'></td>
                                                <td id='rfpow_5_6'></td>
                                                <td id='rfpow_5_7'></td>
                                            </tr>
                                            <th>
                                                <td>10 TV</td>
                                                <td>2 TV</td>
                                                <td>16 TV</td>
                                                <td>8 TV</td>
                                                <td>10 TH</td>
                                                <td>2 TH</td>
                                                <td>16 TH</td>
                                                <td>8 TH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='rfpow_6_0'></td>
                                                <td id='rfpow_6_1'></td>
                                                <td id='rfpow_6_2'></td>
                                                <td id='rfpow_6_3'></td>
                                                <td id='rfpow_6_4'></td>
                                                <td id='rfpow_6_5'></td>
                                                <td id='rfpow_6_6'></td>
                                                <td id='rfpow_6_7'></td>
                                            </tr>
                                            <th>
                                                <td>13 BV</td>
                                                <td>5 BV</td>
                                                <td>9 BV</td>
                                                <td>1 BV</td>
                                                <td>13 BH</td>
                                                <td>5 BH</td>
                                                <td>9 BH</td>
                                                <td>1 BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='rfpow_7_0'></td>
                                                <td id='rfpow_7_1'></td>
                                                <td id='rfpow_7_2'></td>
                                                <td id='rfpow_7_3'></td>
                                                <td id='rfpow_7_4'></td>
                                                <td id='rfpow_7_5'></td>
                                                <td id='rfpow_7_6'></td>
                                                <td id='rfpow_7_7'></td>
                                            </tr>
                                            <th>
                                                <td>15 BV</td>
                                                <td>7 BV</td>
                                                <td>11 BV</td>
                                                <td>3 BV</td>
                                                <td>15 BH</td>
                                                <td>7 BH</td>
                                                <td>11 BH</td>
                                                <td>3 BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='rfpow_8_0'></td>
                                                <td id='rfpow_8_1'></td>
                                                <td id='rfpow_8_2'></td>
                                                <td id='rfpow_8_3'></td>
                                                <td id='rfpow_8_4'></td>
                                                <td id='rfpow_8_5'></td>
                                                <td id='rfpow_8_6'></td>
                                                <td id='rfpow_8_7'></td>
                                            </tr>
                                            <th>
                                                <td>11 MV</td>
                                                <td>3 MV</td>
                                                <td>13 MV</td>
                                                <td>5 MV</td>
                                                <td>11 MH</td>
                                                <td>3 MH</td>
                                                <td>13 MH</td>
                                                <td>5 MH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='rfpow_9_0'></td>
                                                <td id='rfpow_9_1'></td>
                                                <td id='rfpow_9_2'></td>
                                                <td id='rfpow_9_3'></td>
                                                <td id='rfpow_9_4'></td>
                                                <td id='rfpow_9_5'></td>
                                                <td id='rfpow_9_6'></td>
                                                <td id='rfpow_9_7'></td>
                                            </tr>
                                            <th>
                                                <td>9 MV</td>
                                                <td>1 MV</td>
                                                <td>15 MV</td>
                                                <td>7 MV</td>
                                                <td>9 MH</td>
                                                <td>1 MH</td>
                                                <td>15 MH</td>
                                                <td>7 MH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='rfpow_10_0'></td>
                                                <td id='rfpow_10_1'></td>
                                                <td id='rfpow_10_2'></td>
                                                <td id='rfpow_10_3'></td>
                                                <td id='rfpow_10_4'></td>
                                                <td id='rfpow_10_5'></td>
                                                <td id='rfpow_10_6'></td>
                                                <td id='rfpow_10_7'></td>
                                            </tr>
                                            <th>
                                                <td>15 TV</td>
                                                <td>7 TV</td>
                                                <td>11 TV</td>
                                                <td>3 TV</td>
                                                <td>15 TH</td>
                                                <td>7 TH</td>
                                                <td>11 TH</td>
                                                <td>3 TH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='rfpow_11_0'></td>
                                                <td id='rfpow_11_1'></td>
                                                <td id='rfpow_11_2'></td>
                                                <td id='rfpow_11_3'></td>
                                                <td id='rfpow_11_4'></td>
                                                <td id='rfpow_11_5'></td>
                                                <td id='rfpow_11_6'></td>
                                                <td id='rfpow_11_7'></td>
                                            </tr>
                                            <th>
                                                <td>13 TV</td>
                                                <td>5 TV</td>
                                                <td>9 TV</td>
                                                <td>1 TV</td>
                                                <td>13 TH</td>
                                                <td>5 TH</td>
                                                <td>9 TH</td>
                                                <td>1 TH</td>
                                            </th>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div id="tab-2" class="tab-pane">
                            <div class="panel-body">
                                <div class="ibox-content">
                                    <table data-sort="false" class="footable" data-page-size="56" id='scaler' style="width:100%">
                                        <h5>Scalers 1-12 [Hz]</h5>
                                        <tbody>
                                            <tr>
                                                <td></td>
                                                <td id='scaler_0_0' class='scaler'></td>
                                                <td id='scaler_0_1' class='scaler'></td>
                                                <td id='scaler_0_2' class='scaler'></td>
                                                <td id='scaler_0_3' class='scaler'></td>
                                                <td id='scaler_0_4' class='scaler'></td>
                                                <td id='scaler_0_5' class='scaler'></td>
                                                <td id='scaler_0_6' class='scaler'></td>
                                                <td id='scaler_0_7' class='scaler'></td>
                                                <td id='scaler_0_8' class='scaler'></td>
                                                <td id='scaler_0_9' class='scaler'></td>
                                                <td id='scaler_0_10' class='scaler'></td>
                                                <td id='scaler_0_11' class='scaler'></td>
                                            </tr>
                                            <th>
                                                <td>nu 01</td>
                                                <td>nu 02</td>
                                                <td>nu 03</td>
                                                <td>nu 04</td>
                                                <td>nu 05</td>
                                                <td>nu 06</td>
                                                <td>nu 07</td>
                                                <td>nu 08</td>
                                                <td>nu 09</td>
                                                <td>nu 10</td>
                                                <td>nu 11</td>
                                                <td>nu 12</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='scaler_1_0'></td>
                                                <td id='scaler_1_1'></td>
                                                <td id='scaler_1_2'></td>
                                                <td id='scaler_1_3'></td>
                                                <td id='scaler_1_4'></td>
                                                <td id='scaler_1_5'></td>
                                                <td id='scaler_1_6'></td>
                                                <td id='scaler_1_7'></td>
                                                <td id='scaler_1_8'></td>
                                                <td id='scaler_1_9'></td>
                                                <td id='scaler_1_10'></td>
                                                <td id='scaler_1_11'></td>
                                            </tr>
                                            <th>
                                                <td>nu 13</td>
                                                <td>nu 14</td>
                                                <td>nu 15</td>
                                                <td>nu 16</td>
                                                <td>nu 17</td>
                                                <td>nu 18</td>
                                                <td>nu 19</td>
                                                <td>nu 20</td>
                                                <td>nu 21</td>
                                                <td>nu 22</td>
                                                <td>nu 23</td>
                                                <td>nu 24</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='scaler_2_0'></td>
                                                <td id='scaler_2_1'></td>
                                                <td id='scaler_2_2'></td>
                                                <td id='scaler_2_3'></td>
                                                <td id='scaler_2_4'></td>
                                                <td id='scaler_2_5'></td>
                                                <td id='scaler_2_6'></td>
                                                <td id='scaler_2_7'></td>
                                                <td id='scaler_2_8'></td>
                                                <td id='scaler_2_9'></td>
                                                <td id='scaler_2_10'></td>
                                                <td id='scaler_2_11'></td>
                                            </tr>
                                            <th>
                                                <td>1TV</td>
                                                <td>1TH</td>
                                                <td>1MV</td>
                                                <td>1MH</td>
                                                <td>1BV</td>
                                                <td>1BH</td>
                                                <td>5TV</td>
                                                <td>5TH</td>
                                                <td>5MV</td>
                                                <td>5MH</td>
                                                <td>5BV</td>
                                                <td>5BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='scaler_3_0'></td>
                                                <td id='scaler_3_1'></td>
                                                <td id='scaler_3_2'></td>
                                                <td id='scaler_3_3'></td>
                                                <td id='scaler_3_4'></td>
                                                <td id='scaler_3_5'></td>
                                                <td id='scaler_3_6'></td>
                                                <td id='scaler_3_7'></td>
                                                <td id='scaler_3_8'></td>
                                                <td id='scaler_3_9'></td>
                                                <td id='scaler_3_10'></td>
                                                <td id='scaler_3_11'></td>
                                            </tr>
                                            <th>
                                                <td>3TV</td>
                                                <td>3TH</td>
                                                <td>3MV</td>
                                                <td>3MH</td>
                                                <td>3BV</td>
                                                <td>3BH</td>
                                                <td>7TV</td>
                                                <td>7TH</td>
                                                <td>7MV</td>
                                                <td>7MH</td>
                                                <td>7BV</td>
                                                <td>7BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='scaler_4_0'></td>
                                                <td id='scaler_4_1'></td>
                                                <td id='scaler_4_2'></td>
                                                <td id='scaler_4_3'></td>
                                                <td id='scaler_4_4'></td>
                                                <td id='scaler_4_5'></td>
                                                <td id='scaler_4_6'></td>
                                                <td id='scaler_4_7'></td>
                                                <td id='scaler_4_8'></td>
                                                <td id='scaler_4_9'></td>
                                                <td id='scaler_4_10'></td>
                                                <td id='scaler_4_11'></td>
                                            </tr>
                                            <th>
                                                <td>2TV</td>
                                                <td>2TH</td>
                                                <td>2MV</td>
                                                <td>2MH</td>
                                                <td>2BV</td>
                                                <td>2BH</td>
                                                <td>6TV</td>
                                                <td>6TH</td>
                                                <td>6MV</td>
                                                <td>6MH</td>
                                                <td>6BV</td>
                                                <td>6BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='scaler_5_0'></td>
                                                <td id='scaler_5_1'></td>
                                                <td id='scaler_5_2'></td>
                                                <td id='scaler_5_3'></td>
                                                <td id='scaler_5_4'></td>
                                                <td id='scaler_5_5'></td>
                                                <td id='scaler_5_6'></td>
                                                <td id='scaler_5_7'></td>
                                                <td id='scaler_5_8'></td>
                                                <td id='scaler_5_9'></td>
                                                <td id='scaler_5_10'></td>
                                                <td id='scaler_5_11'></td>
                                            </tr>
                                            <th>
                                                <td>4TV</td>
                                                <td>4TH</td>
                                                <td>4MV</td>
                                                <td>4MH</td>
                                                <td>4BV</td>
                                                <td>4BH</td>
                                                <td>8TV</td>
                                                <td>8TH</td>
                                                <td>8MV</td>
                                                <td>8MH</td>
                                                <td>8BV</td>
                                                <td>8BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='scaler_6_0'></td>
                                                <td id='scaler_6_1'></td>
                                                <td id='scaler_6_2'></td>
                                                <td id='scaler_6_3'></td>
                                                <td id='scaler_6_4'></td>
                                                <td id='scaler_6_5'></td>
                                                <td id='scaler_6_6'></td>
                                                <td id='scaler_6_7'></td>
                                                <td id='scaler_6_8'></td>
                                                <td id='scaler_6_9'></td>
                                                <td id='scaler_6_10'></td>
                                                <td id='scaler_6_11'></td>
                                            </tr>
                                            <th>
                                                <td>16TV</td>
                                                <td>16TH</td>
                                                <td>16MV</td>
                                                <td>16MH</td>
                                                <td>16BV</td>
                                                <td>16BH</td>
                                                <td>12TV</td>
                                                <td>12TH</td>
                                                <td>12MV</td>
                                                <td>12MH</td>
                                                <td>12BV</td>
                                                <td>12BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='scaler_7_0'></td>
                                                <td id='scaler_7_1'></td>
                                                <td id='scaler_7_2'></td>
                                                <td id='scaler_7_3'></td>
                                                <td id='scaler_7_4'></td>
                                                <td id='scaler_7_5'></td>
                                                <td id='scaler_7_6'></td>
                                                <td id='scaler_7_7'></td>
                                                <td id='scaler_7_8'></td>
                                                <td id='scaler_7_9'></td>
                                                <td id='scaler_7_10'></td>
                                                <td id='scaler_7_11'></td>
                                            </tr>
                                            <th>
                                                <td>14TV</td>
                                                <td>14TH</td>
                                                <td>14MV</td>
                                                <td>14MH</td>
                                                <td>14BV</td>
                                                <td>14BH</td>
                                                <td>10TV</td>
                                                <td>10TH</td>
                                                <td>10MV</td>
                                                <td>10MH</td>
                                                <td>10BV</td>
                                                <td>10BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='scaler_8_0'></td>
                                                <td id='scaler_8_1'></td>
                                                <td id='scaler_8_2'></td>
                                                <td id='scaler_8_3'></td>
                                                <td id='scaler_8_4'></td>
                                                <td id='scaler_8_5'></td>
                                                <td id='scaler_8_6'></td>
                                                <td id='scaler_8_7'></td>
                                                <td id='scaler_8_8'></td>
                                                <td id='scaler_8_9'></td>
                                                <td id='scaler_8_10'></td>
                                                <td id='scaler_8_11'></td>
                                            </tr>
                                            <th>
                                                <td>15TV</td>
                                                <td>15TH</td>
                                                <td>15MV</td>
                                                <td>15MH</td>
                                                <td>15BV</td>
                                                <td>15BH</td>
                                                <td>11TV</td>
                                                <td>11TH</td>
                                                <td>11MV</td>
                                                <td>11MH</td>
                                                <td>11BV</td>
                                                <td>11BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='scaler_9_0'></td>
                                                <td id='scaler_9_1'></td>
                                                <td id='scaler_9_2'></td>
                                                <td id='scaler_9_3'></td>
                                                <td id='scaler_9_4'></td>
                                                <td id='scaler_9_5'></td>
                                                <td id='scaler_9_6'></td>
                                                <td id='scaler_9_7'></td>
                                                <td id='scaler_9_8'></td>
                                                <td id='scaler_9_9'></td>
                                                <td id='scaler_9_10'></td>
                                                <td id='scaler_9_11'></td>
                                            </tr>
                                            <th>
                                                <td>13TV</td>
                                                <td>13TH</td>
                                                <td>13MV</td>
                                                <td>13MH</td>
                                                <td>13BV</td>
                                                <td>13BH</td>
                                                <td>9TV</td>
                                                <td>9TH</td>
                                                <td>9MV</td>
                                                <td>9MH</td>
                                                <td>9BV</td>
                                                <td>9BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='scaler_10_0'></td>
                                                <td id='scaler_10_1'></td>
                                                <td id='scaler_10_2'></td>
                                                <td id='scaler_10_3'></td>
                                                <td id='scaler_10_4'></td>
                                                <td id='scaler_10_5'></td>
                                                <td id='scaler_10_6'></td>
                                                <td id='scaler_10_7'></td>
                                                <td id='scaler_10_8'></td>
                                                <td id='scaler_10_9'></td>
                                                <td id='scaler_10_10'></td>
                                                <td id='scaler_10_11'></td>
                                            </tr>
                                            <th>
                                                <td>nu 25</td>
                                                <td>nu 26</td>
                                                <td>nu 27</td>
                                                <td>nu 28</td>
                                                <td>nu 29</td>
                                                <td>nu 30</td>
                                                <td>nu 31</td>
                                                <td>nu 32</td>
                                                <td>nu 33</td>
                                                <td>nu 34</td>
                                                <td>nu 35</td>
                                                <td>nu 36</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='scaler_11_0'></td>
                                                <td id='scaler_11_1'></td>
                                                <td id='scaler_11_2'></td>
                                                <td id='scaler_11_3'></td>
                                                <td id='scaler_11_4'></td>
                                                <td id='scaler_11_5'></td>
                                                <td id='scaler_11_6'></td>
                                                <td id='scaler_11_7'></td>
                                                <td id='scaler_11_8'></td>
                                                <td id='scaler_11_9'></td>
                                                <td id='scaler_11_10'></td>
                                                <td id='scaler_11_11'></td>
                                            </tr>
                                            <th>
                                                <td>nu 37</td>
                                                <td>nu 38</td>
                                                <td>nu 39</td>
                                                <td>nu 40</td>
                                                <td>nu 41</td>
                                                <td>nu 42</td>
                                                <td>nu 43</td>
                                                <td>nu 44</td>
                                                <td>nu 45</td>
                                                <td>nu 46</td>
                                                <td>nu 47</td>
                                                <td>nu 48</td>
                                            </th>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div id="tab-3" class="tab-pane">
                            <div class="panel-body">
                                <div class="ibox-content">
                                    <table data-sort="false" class="footable" data-page-size="56" id='thresh' style="width:100%">
                                        <h5>Thresholds SURF 1-12 [DAC]</h5>
                                        <tbody>
                                            <tr>
                                                <td></td>
                                                <td id='thresh_0_0'></td>
                                                <td id='thresh_0_1'></td>
                                                <td id='thresh_0_2'></td>
                                                <td id='thresh_0_3'></td>
                                                <td id='thresh_0_4'></td>
                                                <td id='thresh_0_5'></td>
                                                <td id='thresh_0_6'></td>
                                                <td id='thresh_0_7'></td>
                                                <td id='thresh_0_8'></td>
                                                <td id='thresh_0_9'></td>
                                                <td id='thresh_0_10'></td>
                                                <td id='thresh_0_11'></td>
                                            </tr>
                                            <th>
                                                <td>nu 01</td>
                                                <td>nu 02</td>
                                                <td>nu 03</td>
                                                <td>nu 04</td>
                                                <td>nu 05</td>
                                                <td>nu 06</td>
                                                <td>nu 07</td>
                                                <td>nu 08</td>
                                                <td>nu 09</td>
                                                <td>nu 10</td>
                                                <td>nu 11</td>
                                                <td>nu 12</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='thresh_1_0'></td>
                                                <td id='thresh_1_1'></td>
                                                <td id='thresh_1_2'></td>
                                                <td id='thresh_1_3'></td>
                                                <td id='thresh_1_4'></td>
                                                <td id='thresh_1_5'></td>
                                                <td id='thresh_1_6'></td>
                                                <td id='thresh_1_7'></td>
                                                <td id='thresh_1_8'></td>
                                                <td id='thresh_1_9'></td>
                                                <td id='thresh_1_10'></td>
                                                <td id='thresh_1_11'></td>
                                            </tr>
                                            <th>
                                                <td>nu 13</td>
                                                <td>nu 14</td>
                                                <td>nu 15</td>
                                                <td>nu 16</td>
                                                <td>nu 17</td>
                                                <td>nu 18</td>
                                                <td>nu 19</td>
                                                <td>nu 20</td>
                                                <td>nu 21</td>
                                                <td>nu 22</td>
                                                <td>nu 23</td>
                                                <td>nu 24</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='thresh_2_0'></td>
                                                <td id='thresh_2_1'></td>
                                                <td id='thresh_2_2'></td>
                                                <td id='thresh_2_3'></td>
                                                <td id='thresh_2_4'></td>
                                                <td id='thresh_2_5'></td>
                                                <td id='thresh_2_6'></td>
                                                <td id='thresh_2_7'></td>
                                                <td id='thresh_2_8'></td>
                                                <td id='thresh_2_9'></td>
                                                <td id='thresh_2_10'></td>
                                                <td id='thresh_2_11'></td>
                                            </tr>
                                            <th>
                                                <td>1TV</td>
                                                <td>1TH</td>
                                                <td>1MV</td>
                                                <td>1MH</td>
                                                <td>1BV</td>
                                                <td>1BH</td>
                                                <td>5TV</td>
                                                <td>5TH</td>
                                                <td>5MV</td>
                                                <td>5MH</td>
                                                <td>5BV</td>
                                                <td>5BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='thresh_3_0'></td>
                                                <td id='thresh_3_1'></td>
                                                <td id='thresh_3_2'></td>
                                                <td id='thresh_3_3'></td>
                                                <td id='thresh_3_4'></td>
                                                <td id='thresh_3_5'></td>
                                                <td id='thresh_3_6'></td>
                                                <td id='thresh_3_7'></td>
                                                <td id='thresh_3_8'></td>
                                                <td id='thresh_3_9'></td>
                                                <td id='thresh_3_10'></td>
                                                <td id='thresh_3_11'></td>
                                            </tr>
                                            <th>
                                                <td>3TV</td>
                                                <td>3TH</td>
                                                <td>3MV</td>
                                                <td>3MH</td>
                                                <td>3BV</td>
                                                <td>3BH</td>
                                                <td>7TV</td>
                                                <td>7TH</td>
                                                <td>7MV</td>
                                                <td>7MH</td>
                                                <td>7BV</td>
                                                <td>7BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='thresh_4_0'></td>
                                                <td id='thresh_4_1'></td>
                                                <td id='thresh_4_2'></td>
                                                <td id='thresh_4_3'></td>
                                                <td id='thresh_4_4'></td>
                                                <td id='thresh_4_5'></td>
                                                <td id='thresh_4_6'></td>
                                                <td id='thresh_4_7'></td>
                                                <td id='thresh_4_8'></td>
                                                <td id='thresh_4_9'></td>
                                                <td id='thresh_4_10'></td>
                                                <td id='thresh_4_11'></td>
                                            </tr>
                                            <th>
                                                <td>2TV</td>
                                                <td>2TH</td>
                                                <td>2MV</td>
                                                <td>2MH</td>
                                                <td>2BV</td>
                                                <td>2BH</td>
                                                <td>6TV</td>
                                                <td>6TH</td>
                                                <td>6MV</td>
                                                <td>6MH</td>
                                                <td>6BV</td>
                                                <td>6BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='thresh_5_0'></td>
                                                <td id='thresh_5_1'></td>
                                                <td id='thresh_5_2'></td>
                                                <td id='thresh_5_3'></td>
                                                <td id='thresh_5_4'></td>
                                                <td id='thresh_5_5'></td>
                                                <td id='thresh_5_6'></td>
                                                <td id='thresh_5_7'></td>
                                                <td id='thresh_5_8'></td>
                                                <td id='thresh_5_9'></td>
                                                <td id='thresh_5_10'></td>
                                                <td id='thresh_5_11'></td>
                                            </tr>
                                            <th>
                                                <td>4TV</td>
                                                <td>4TH</td>
                                                <td>4MV</td>
                                                <td>4MH</td>
                                                <td>4BV</td>
                                                <td>4BH</td>
                                                <td>8TV</td>
                                                <td>8TH</td>
                                                <td>8MV</td>
                                                <td>8MH</td>
                                                <td>8BV</td>
                                                <td>8BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='thresh_6_0'></td>
                                                <td id='thresh_6_1'></td>
                                                <td id='thresh_6_2'></td>
                                                <td id='thresh_6_3'></td>
                                                <td id='thresh_6_4'></td>
                                                <td id='thresh_6_5'></td>
                                                <td id='thresh_6_6'></td>
                                                <td id='thresh_6_7'></td>
                                                <td id='thresh_6_8'></td>
                                                <td id='thresh_6_9'></td>
                                                <td id='thresh_6_10'></td>
                                                <td id='thresh_6_11'></td>
                                            </tr>
                                            <th>
                                                <td>16TV</td>
                                                <td>16TH</td>
                                                <td>16MV</td>
                                                <td>16MH</td>
                                                <td>16BV</td>
                                                <td>16BH</td>
                                                <td>12TV</td>
                                                <td>12TH</td>
                                                <td>12MV</td>
                                                <td>12MH</td>
                                                <td>12BV</td>
                                                <td>12BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='thresh_7_0'></td>
                                                <td id='thresh_7_1'></td>
                                                <td id='thresh_7_2'></td>
                                                <td id='thresh_7_3'></td>
                                                <td id='thresh_7_4'></td>
                                                <td id='thresh_7_5'></td>
                                                <td id='thresh_7_6'></td>
                                                <td id='thresh_7_7'></td>
                                                <td id='thresh_7_8'></td>
                                                <td id='thresh_7_9'></td>
                                                <td id='thresh_7_10'></td>
                                                <td id='thresh_7_11'></td>
                                            </tr>
                                            <th>
                                                <td>14TV</td>
                                                <td>14TH</td>
                                                <td>14MV</td>
                                                <td>14MH</td>
                                                <td>14BV</td>
                                                <td>14BH</td>
                                                <td>10TV</td>
                                                <td>10TH</td>
                                                <td>10MV</td>
                                                <td>10MH</td>
                                                <td>10BV</td>
                                                <td>10BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='thresh_8_0'></td>
                                                <td id='thresh_8_1'></td>
                                                <td id='thresh_8_2'></td>
                                                <td id='thresh_8_3'></td>
                                                <td id='thresh_8_4'></td>
                                                <td id='thresh_8_5'></td>
                                                <td id='thresh_8_6'></td>
                                                <td id='thresh_8_7'></td>
                                                <td id='thresh_8_8'></td>
                                                <td id='thresh_8_9'></td>
                                                <td id='thresh_8_10'></td>
                                                <td id='thresh_8_11'></td>
                                            </tr>
                                            <th>
                                                <td>15TV</td>
                                                <td>15TH</td>
                                                <td>15MV</td>
                                                <td>15MH</td>
                                                <td>15BV</td>
                                                <td>15BH</td>
                                                <td>11TV</td>
                                                <td>11TH</td>
                                                <td>11MV</td>
                                                <td>11MH</td>
                                                <td>11BV</td>
                                                <td>11BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='thresh_9_0'></td>
                                                <td id='thresh_9_1'></td>
                                                <td id='thresh_9_2'></td>
                                                <td id='thresh_9_3'></td>
                                                <td id='thresh_9_4'></td>
                                                <td id='thresh_9_5'></td>
                                                <td id='thresh_9_6'></td>
                                                <td id='thresh_9_7'></td>
                                                <td id='thresh_9_8'></td>
                                                <td id='thresh_9_9'></td>
                                                <td id='thresh_9_10'></td>
                                                <td id='thresh_9_11'></td>
                                            </tr>
                                            <th>
                                                <td>13TV</td>
                                                <td>13TH</td>
                                                <td>13MV</td>
                                                <td>13MH</td>
                                                <td>13BV</td>
                                                <td>13BH</td>
                                                <td>9TV</td>
                                                <td>9TH</td>
                                                <td>9MV</td>
                                                <td>9MH</td>
                                                <td>9BV</td>
                                                <td>9BH</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='thresh_10_0'></td>
                                                <td id='thresh_10_1'></td>
                                                <td id='thresh_10_2'></td>
                                                <td id='thresh_10_3'></td>
                                                <td id='thresh_10_4'></td>
                                                <td id='thresh_10_5'></td>
                                                <td id='thresh_10_6'></td>
                                                <td id='thresh_10_7'></td>
                                                <td id='thresh_10_8'></td>
                                                <td id='thresh_10_9'></td>
                                                <td id='thresh_10_10'></td>
                                                <td id='thresh_10_11'></td>
                                            </tr>
                                            <th>
                                                <td>nu 25</td>
                                                <td>nu 26</td>
                                                <td>nu 27</td>
                                                <td>nu 28</td>
                                                <td>nu 29</td>
                                                <td>nu 30</td>
                                                <td>nu 31</td>
                                                <td>nu 32</td>
                                                <td>nu 33</td>
                                                <td>nu 34</td>
                                                <td>nu 35</td>
                                                <td>nu 36</td>
                                            </th>
                                            <tr>
                                                <td></td>
                                                <td id='thresh_11_0'></td>
                                                <td id='thresh_11_1'></td>
                                                <td id='thresh_11_2'></td>
                                                <td id='thresh_11_3'></td>
                                                <td id='thresh_11_4'></td>
                                                <td id='thresh_11_5'></td>
                                                <td id='thresh_11_6'></td>
                                                <td id='thresh_11_7'></td>
                                                <td id='thresh_11_8'></td>
                                                <td id='thresh_11_9'></td>
                                                <td id='thresh_11_10'></td>
                                                <td id='thresh_11_11'></td>
                                            </tr>
                                            <th>
                                                <td>nu 37</td>
                                                <td>nu 38</td>
                                                <td>nu 39</td>
                                                <td>nu 40</td>
                                                <td>nu 41</td>
                                                <td>nu 42</td>
                                                <td>nu 43</td>
                                                <td>nu 44</td>
                                                <td>nu 45</td>
                                                <td>nu 46</td>
                                                <td>nu 47</td>
                                                <td>nu 48</td>
                                            </th>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %} {% block scripts %} {{ super() }}
<script src="{{ url_for('static', filename='inspinia/js/plugins/footable/footable.all.min.js') }}"></script>
<script src="{{ url_for('static', filename='inspinia/js/plugins/sparkline/jquery.sparkline.min.js') }}"></script>
<script>
var slope_yInt= [[[526.8839104,63592.5741],[373.6863544,49897.30734],[555,66666],[555,66666],[605.3156823,73367.47063],[440.9572301,55427.57492],[555,66666],[590.9572301,66656.15929]],[[595.1934827,68393.66079],[594.5417515,67800.76056],[604.3788187,70403.7828],[591.8126273,67553.62209],[614.5213849,71506.99889],[978.1873727,96703.62768],[598.7372709,69976.34955],[532.9327902,57954.13249]],[[584.5417515,66513.08827],[604.2362525,68788.33899],[621.6496945,71955.98891],[605.6211813,68748.96449],[590.8757637,66758.93426],[586.700611,66010.35153],[579.6334012,68480.18028],[602.790224,67479.39473]],[[606.4765784,70179.52729],[593.0346232,67527.59753],[597.2505092,69292.19277],[605.0916497,69221.8018],[622.1384929,72033.83908],[589.7556008,65750.09012],[606.395112,70126.20226],[595.0305499,67003.11073]],[[611.5682281,71248.79159],[590.6517312,66357.46543],[612.2199593,69526.29182],[596.089613,68345.13611],[619.8574338,70608.33828],[622.9531568,70848.08937],[601.0386965,68005.85661],[597.209776,66316.28026]],[[609.9592668,70866.19727],[593.1364562,67135.92881],[601.3034623,68590.83796],[383.5845214,49567.94835],[609.0631365,70695.02195],[610.0203666,68147.51604],[599.2668024,66867.81223],[589.2464358,66166.73369]],[[594.5824847,69710.57308],[592.7494908,66860.20993],[586.17107943,66148.4888],[624.5621181,68524.48369],[596.3543788,69784.31745],[590.7535642,66628.99672],[570.203666,63440.08319],[594.3584521,66476.90425]],[[593.6456212,66868.08524],[582.9327902,66069.39395],[613.3808554,71221.14848],[584.1955193,66325.7819],[593.1364562,67137.42881],[577.9429735,65407.36093],[601.7718941,70072.28187],[595.3971487,66276.52336]],[[610.814664,70811.96007],[599.8574338,68815.99369],[621.2423625,71470.66377],[609.2668024,68532.08453],[604.8472505,70599.62671],[598.4317719,66513.05569],[628.3095723,72184.93502],[586.8839104,65862.60785]],[[612.586558,69577.70445],[627.2505092,70579.90965],[600.610998,70628.52521],[597.0468432,67210.7302],[600.9368635,67894.72533],[625.1934827,68794.47767],[599.6741344,69865.43738],[578.4521385,64953.81736]],[[614.2362525,71680.41129],[626.6191446,70426.21567],[611.4867617,70802.06656],[619.3279022,70753.17559],[609.5315682,68567.66587],[587.5356415,66347.30808],[625.7026477,72206.8341],[550.7739308,59571.01381]],[[617.5967413,71349.64373],[605.98778,68479.67711],[615.9063136,70013.22438],[611.2423625,69238.19148],[614.01222,71589.34246],[970.5702648,95364.88748],[598.9205703,65651.70586],[614.5417515,68392.80514]]];
var turf_nbufs = [];
var turf_nows = [];
var turf_times = [];
var hk_surf_nbufs = [];
var hk_surf_nows = [];
var hk_surf_times = [];
var i = 0;
var j = 0;
var offset_turf = 0;
var offset_hk_surf = 0;
var connected = false;
var sleep_interval = 2000 //by default, re-access the database every 2seconds to see if there are any new data comes in.
var sync_on = false;

var l2_range_map = $.range_map({
    '2000:5000': 'yellow',
    '5000:30000:': 'green',
    '30000:50000:': 'yellow'
})
var l3_range_map = $.range_map({
    '2:4': 'yellow',
    '4:125:': 'green',
    '125:170:': 'yellow'
})
var scaler_range_map = $.range_map({
    '4:5': 'yellow',
    '5:6.5:': 'green',
    '6.5:7.5:': 'yellow'
})
var rfpow_range_map = $.range_map({
    '0:400': 'blue',
    '400:800:': 'green',
    '800:1200:': 'yellow'
})
var thresh_range_map = $.range_map({
    '.5:1': 'yellow',
    '1:2:': 'green',
    '2:2.4:': 'yellow'
})

function rfpower_dBm(nsurf,nchan,adc){
    return (adc-slope_yInt[nsurf][nchan][1])/slope_yInt[nsurf][nchan][0];//Power = (adc-yInt)/slope
}

function rfpower_T(nsurf,nchan,adc){
    dBm=rfpower_dBm(nsurf,nchan,adc);
    return Math.pow(10,dBm/10.)/1.38*Math.pow(10, 11);// K = {10^(Power/10)}/(1000.*1.38e-23*1e9))
}

function update_l2_data($selector, new_data) {
    var array_string = $selector.attr('values');
    array_string = new_data;
    // $selector.attr('values', [1,1.5,4.5,6]).sparkline('html', {
    $selector.attr('values', array_string).sparkline('html', {
        type: 'bar',
        barWidth: 10,
        height: '90',
        // zeroAxis: false,
        colorMap: l2_range_map,
        chartRangeMin: 0,
        chartRangeMax: 65535
    });
}

function update_l3_data($selector, new_data) {
    var array_string = $selector.attr('values');
    array_string = new_data;
    // $selector.attr('values', [1,1.5,4.5,6]).sparkline('html', {
    $selector.attr('values', array_string).sparkline('html', {
        type: 'bar',
        barWidth: 10,
        height: '90',
        // zeroAxis: false,
        colorMap: l3_range_map,
        chartRangeMin: 0,
        chartRangeMax: 255
    });
}

function update_scaler_data($selector, new_data) {
    var array_string = $selector.attr('values');
    array_string = new_data;
    // $selector.attr('values', [1,1.5,4.5,6]).sparkline('html', {
    $selector.attr('values', array_string).sparkline('html', {
        type: 'bar',
        barWidth: 30,
        // zeroAxis: false,
        colorMap: scaler_range_map,
        chartRangeMin: 0,
        chartRangeMax: 8
    });
}

function update_rfpow_data($selector, new_data) {
    var array_string = $selector.attr('values');
    array_string = new_data;
    // $selector.attr('values', [1,1.5,4.5,6]).sparkline('html', {
    $selector.attr('values', array_string).sparkline('html', {
        type: 'bar',
        barWidth: 30,
        // zeroAxis: false,
        colorMap: rfpow_range_map,
        chartRangeMin: -100,
        chartRangeMax: 1200
    });
}

function update_thresh_data($selector, new_data) {
    var array_string = $selector.attr('values');
    array_string = new_data;
    // $selector.attr('values', [1,1.5,4.5,6]).sparkline('html', {
    $selector.attr('values', array_string).sparkline('html', {
        type: 'bar',
        barWidth: 30,
        // zeroAxis: false,
        colorMap: thresh_range_map,
        chartRangeMin: 0,
        chartRangeMax: 4096
    });
}

function updatehtml_turf(turf) {
    if (!turf)  return;
    $.getJSON('/api/' + ip_db + '/turf/' + turf, function(data) {
        if(data.length == 0){
            return
        }
        $('#turf #index').html(i + 1 + "/" + turf_nbufs.length);
        $('#turf #crc').html(data.turf.crc);
        $('#turf #nbuf').html(data.turf.nbuf);
        $('#turf #now').html(data.turf.now + " (" + timeConverter(data.turf.now) + ")");
        $('#turf #time').html(data.turf.time + " (" + timeConverter(data.turf.time) + ")");
        $('#turf #deadtime').html(Number(data.turf.deadtime * 16.384 / 1000000).toFixed(2));
        $('#turf #l2trigmask').html(byteString(data.turf.l2trigmask));
        // $('#turf #l2trigmaskh').html(data.turf.l2trigmaskh);
        $('#turf #phitrigmask').html(byteString(data.turf.phitrigmask));
        // $('#turf #phitrigmaskh').html(data.turf.phitrigmaskh);

        var l2_name;
        for (ii = 0; ii < 16; ii++) {
            l2_name = '#l2_' + ii;
            update_l2_data($(l2_name), parseInt(data.turf.l2[ii]));
        }
        // var l2h_name;
        // for (ii = 0; ii < 16; ii++) {
        //     l2h_name = '#l2h_' + ii;
        //     update_l2_data($(l2h_name), parseInt(data.turf.l2h[ii]));
        // }
        var l3_name;
        for (ii = 0; ii < 16; ii++) {
            l3_name = '#l3_' + ii;
            update_l3_data($(l3_name), parseInt(data.turf.l3[ii]));
        }

        var l3gated_name;
        for (ii = 0; ii < 16; ii++) {
            l3gated_name = '#l3gated_' + ii;
            update_l3_data($(l3gated_name), parseInt(data.turf.l3gated[ii]));
            console.log(data.turf.l3gated[ii]);
        }

        // var l3h_name;
        // for (ii = 0; ii < 16; ii++) {
        //     l3h_name = '#l3h_' + ii;
        //     update_l3_data($(l3h_name), parseInt(data.turf.l3h[i]));
        // }
    });

}

function updatehtml_hk_surf(hk_surf) {
    if (!hk_surf) return;
    try{
        $.getJSON('/api/' + ip_db + '/hk_surf/' + hk_surf, function(data) {
            console.log(data);
            $('#rfpower #index').html(j + 1 + "/" + hk_surf_nbufs.length);
            $('#rfpower #crc').html(data.hk_surf.crc);
            $('#rfpower #nbuf').html(data.hk_surf.nbuf);
            $('#rfpower #now').html(data.hk_surf.now + " (" + timeConverter(data.hk_surf.now) + ")");
            $('#rfpower #time').html(data.hk_surf.time + " (" + timeConverter(data.hk_surf.time) + ")");
            $('#rfpower #us').html(data.hk_surf.us);
            $('#rfpower #global').html(data.hk_surf.global);
            $('#rfpower #error').html(data.hk_surf.error);
            $('#rfpower #upper_0').html(data.hk_surf.upper[0]);
            $('#rfpower #upper_1').html(data.hk_surf.upper[1]);
            $('#rfpower #upper_2').html(data.hk_surf.upper[2]);
            $('#rfpower #upper_3').html(data.hk_surf.upper[3]);
            $('#rfpower #upper_4').html(data.hk_surf.upper[4]);
            $('#rfpower #upper_5').html(data.hk_surf.upper[5]);
            $('#rfpower #upper_6').html(data.hk_surf.upper[6]);
            $('#rfpower #upper_7').html(data.hk_surf.upper[7]);
            $('#rfpower #upper_8').html(data.hk_surf.upper[8]);
            $('#rfpower #upper_9').html(data.hk_surf.upper[9]);
            $('#rfpower #upper_10').html(data.hk_surf.upper[10]);
            $('#rfpower #upper_11').html(data.hk_surf.upper[11]);

            var rfpow_name;
            for (ii = 0; ii < 12; ii++) {
                for (jj = 0; jj < 8; jj++) {
                    rfpow_name = '#rfpow_' + ii + '_' + jj;
                    // update_rfpow_data($(rfpow_name), rfpower_dBm(ii, jj, parseInt(data.hk_surf.rfpow[ii][jj])& 0x7fff));
                    update_rfpow_data($(rfpow_name), parseInt(data.hk_surf.rfpow[ii][jj])& 0x7fff);
                }
            }
            var scaler_name;
            for (ii = 0; ii < 12; ii++) {
                for (jj = 0; jj < 12; jj++) {
                    scaler_name = '#scaler_' + ii + '_' + jj;
                    update_scaler_data($(scaler_name), parseInt(data.hk_surf.scaler[ii][jj]));
                }
            }
            var thresh_name;
            for (ii = 0; ii < 12; ii++) {
                for (jj = 0; jj < 12; jj++) {
                    thresh_name = '#thresh_' + ii + '_' + jj;
                    update_thresh_data($(thresh_name), parseInt(data.hk_surf.thresh[ii][jj]));
                }
            }
        });
    }
    catch(err){
        console.log(err);
    }
}



$(document).ready(function() {
    $('#navbar_trig').parent().addClass("active");
    $('.footable').footable();
    function autoload() {
        $.getJSON('/api/' + ip_db + '/turf/nbufs/' + offset_turf, function(data) {
            new_length = data.turf_nbufs.length;
            if(new_length != undefined){
                offset_turf += new_length;
            }
            
            turf_nbufs = turf_nbufs.concat(data.turf_nbufs);
            turf_nows = turf_nows.concat(data.turf_nows);
            turf_times = turf_times.concat(data.turf_times);
            
            $('#connect').removeClass('connect').removeClass('btn-primary').addClass('btn-warning');
            $('#connect').html('Disconnect');
            $('.chosen-select').attr("disabled", true).trigger("chosen:updated");
            $('#turf #index').html(i + 1 + "/" + turf_nbufs.length);
            // switchery.enable();
            connected = true;
            connect.ladda('stop');
            console.log(offset_turf);
            console.log(turf_times.length);
        }).done(function() {
            setTimeout(function() {
                if (new_length) {
                    sleep_interval = 2000;
                } else {
                    sleep_interval = Math.min(sleep_interval * 1.2, 60000);
                }
                if (connected == true) {
                    autoload();
                }
            }, sleep_interval);

        });
        $.getJSON('/api/' + ip_db + '/hk_surf/nbufs/' + offset_hk_surf, function(data) {
            console.log(data);
            new_length = data.hk_surf_nbufs.length;
            offset_hk_surf += new_length
            hk_surf_nbufs = hk_surf_nbufs.concat(data.hk_surf_nbufs);
            hk_surf_nows = hk_surf_nows.concat(data.hk_surf_nows);
            hk_surf_times = hk_surf_times.concat(data.hk_surf_times);

            $('#hk_surf #index').html(i + 1 + "/" + hk_surf_nbufs.length);
        });
    }

    var connect = $('.ladda-button').ladda();
    $('#connect').click(function() {
        if ($(this).hasClass('connect')) {
            turf_nbufs = [];
            turf_nows = [];
            turf_times = [];
            hk_surf_nbufs = [];
            hk_surf_nows = [];
            hk_surf_times = [];
            i = 0;
            j = 0;
            offset_turf = 0;
            offset_hk_surf = 0;
            connect.ladda('start');
            $.ajax({
                url: '/api/connect/' + ip + '/' + db
            }).done(function(response) {
                if (response == 'success') {
                    autoload();
                    setTimeout(function(){
                        $('#first').click();
                    },1000);
                } else {
                    connect.ladda('stop');
                    swal({
                        title: 'Database not found!',
                        type: "warning",
                        timer: 3000,
                        showConfirmButton: true
                    });
                }
            });
        } else {
            turf_nbufs = [];
            turf_nows = [];
            turf_times = [];
            hk_surf_nbufs = [];
            hk_surf_nows = [];
            hk_surf_times = [];
            i = 0;
            j = 0;
            offset_turf = 0;
            offset_hk_surf = 0;
            //otherwise, stop all the requests.
            $('#connect').addClass('connect').addClass('btn-primary').removeClass('btn-warning');
            $('#connect').html('Connect');
            $('.chosen-select').attr("disabled", false).trigger("chosen:updated");
            // if (switchery.isChecked()){
            //     $('.switchery').click();
            // };
            // switchery.disable();              
            connected = false;
        }
    });
 //update all html with hk index i;
function updatehtml_all (i) {
        updatehtml_turf(turf_nbufs[i]);
        j = hk_surf_nows.indexOf(turf_nows[i]);
        if (j != -1) updatehtml_hk_surf(hk_surf_nbufs[j]);
}

    $('#next').click(function() {
         if (sync_on){
           if (i < turf_nbufs.length - 1) {
               i=i+1;
               updateatehtml_all(i);
           };
        }else{
            if (i<turf_nbufs.length-1)        {i=i+1; updatehtml_turf(turf_nbufs[i]);}
            if (j<hk_surf_nbufs.length-1)       {j=j+1; updatehtml_hk_surf(hk_surf_nbufs[j]);}
        }
    });
    $('#prev').click(function() {
        if (sync_on){
            if(i>0){
                i = i -1;
                updatehtml_all(i);
            }
        }else{
            if (i>0)  {i=i-1; updatehtml_turf(turf_nbufs[i]);}
            if (j>0)  {j=j-1; updatehtml_hk_surf(hk_surf_nbufs[j]);}
        }
    });
    $('#first').click(function() {
        if (sync_on){
            i = 0;
            updatehtml_all(i);
        }else{
            {i=0; updatehtml_turf(turf_nbufs[i]);}
            {j=0; updatehtml_hk_surf(hk_surf_nbufs[j]);}
        }
    });
    $('#last').click(function() {
        if (sync_on){
            i = turf_nbufs.length - 1
            updatehtml_all(i);
        }else{
            {i=turf_nbufs.length-1; updatehtml_turf(turf_nbufs[i]);}
            {j=hk_surf_nbufs.length-1; updatehtml_hk_surf(hk_surf_nbufs[j]);}
        }
    });


    var sync_checkbox = $('#sync_checkbox')[0];
    var switchery_sync = new Switchery(sync_checkbox, { color: '#1AB394' });
        sync_checkbox.onchange = function() {
            if (sync_checkbox.checked) {
                sync_on = true;
               
            } else {
                sync_on = false;
            };
        };
    var auto_checkbox = $('#auto_checkbox')[0];
    var switchery_auto = new Switchery(auto_checkbox, { color: '#1AB394' });
    var myInterval;
    auto_checkbox.onchange = function() {
        if (auto_checkbox.checked) {
            myInterval = setInterval(function() {
                if (i < turf_nbufs.length - 1) {
                    i = i + 1;
                    updatehtml_turf(turf_nbufs[i]);
                    j = hk_surf_nows.indexOf(turf_nows[i]);
                    if (j != -1) updatehtml_hk_surf(hk_surf_nbufs[j]);
                };
            }, 1000);
        } else {
            clearInterval(myInterval);
        };
    };
    $('#goto').click(function() {
        var keywords = parseInt($('#keywords').val());
        console.log(keywords);
        if (sync_on){
            var index = turf_times.indexOf(keywords);
            if (index != -1 && keywords) {
                i = index;
                console.log(i);
                updatehtml_turf(turf_nbufs[i]);
                j = hk_surf_nows.indexOf(turf_nows[i]);
                if (j != -1) updatehtml_hk_surf(hk_surf_nbufs[j]);
            } else {
                swal({
                    title: 'Data not found!',
                    type: "warning",
                    timer: 3000,
                    showConfirmButton: true
                });
            }

        }else{
            var message = '';
            var index=turf_times.indexOf(keywords);       if(index!=-1 && keywords) { i=index; updatehtml_turf(turf_nbufs[i]); message += 'Turf ';}
            var index=hk_surf_times.indexOf(keywords);      if(index!=-1 && keywords) { j=index; updatehtml_hk_surf(hk_surf_nbufs[j]); message += 'HK_surf ';}
            if (message == ''){
                swal({  title: 'No matched time found!', type: "warning", timer: 3000, showConfirmButton: true});
            }else{
                swal({  title: 'Matched '+message + 'time are found!', type: "success", timer: 3000, showConfirmButton: true});
            }

        }
       

    });

    $(".nav-tabs a[href='#tab-1']").on('shown.bs.tab', function() {
        updatehtml_hk_surf(hk_surf_nbufs[j]);
    });
    $(".nav-tabs a[href='#tab-2']").on('shown.bs.tab', function() {
        updatehtml_hk_surf(hk_surf_nbufs[j]);
    });
    $(".nav-tabs a[href='#tab-3']").on('shown.bs.tab', function() {
        updatehtml_hk_surf(hk_surf_nbufs[j]);
    });
});
</script>
{% endblock %}